function desktopPreloader(d,b,k){var c=b.getElementsByTagName("li");var h=document.createElement("div");var n=0;var o=0;function j(p){d.childNodes;for(var s=0;s<d.childNodes.length;s++){d.childNodes[s].className=d.childNodes[s].className.replace(/\s?focus/g,"")}for(var s=0;s<c.length;s++){c[s].className=c[s].className.replace(/\s?focus/g,"")}this.className+=" focus";c[this.desktopId].className+=" focus";d.style.left=(this.desktopId*-100)+"%";if(!b.getElementsByClassName){b.getElementsByClassName=patchGEBCN.getElementsByClassName}var q=b.getElementsByClassName("mobile_slider");q[q.length-1].style.left=(this.desktopId*100/d.childNodes.length)+"%";if(!p){var t=this.id.replace(/^desktop/,"");try{history.pushState(this.id,t,"?tab="+t)}catch(r){if(console){console.warn(r)}}}}function a(){for(var p=0;p<c.length;p++){c[p].onclick=function(){document.getElementById("desktop"+this.getElementsByTagName("a")[0].search.replace(/^\?tab=/,"")).focus();return false}}}function m(){var t=new Object();try{var s=location.search.substring(1).split("&");for(var r=0;r<s.length;r++){var q=s[r].split("=");t[decodeURIComponent(q[0])]=decodeURIComponent(q[1])}}catch(p){if(console&&console.info){console.info(p)}}return t}function g(s,p){s.className=s.className.replace(/ ?focus/,"");var q=d.childNodes;n++;for(var r=0;r<q.length;r++){if(q[r].desktopId>p){d.insertBefore(s,q[r]);break}else{if(q[r].className.search(/(^|\s)focus(\s|$)/)>-1){n--}}}if(r==q.length){d.appendChild(s)}else{d.style.left=(n*-100)+"%"}s.desktopId=p;s.focus=j;o--;if(!isMaxWidthMobileDesign()){initDesktop(s);if(!s.getElementsByClassName){s.getElementsByClassName=patchGEBCN.getElementsByClassName}var t=s.getElementsByClassName("window");for(var r=0;r<t.length;r++){initWindow(t[r])}}if(o==0){a();addEventListenerToElement(window,"popstate",function(i){var u=m();if(u.tab){document.getElementById("desktop"+u.tab).focus(true)}else{d.children[0].focus(true)}});if(k){k()}}}function l(p,i){var q=createCrossXMLHttpRequest();q.open("GET",p+"&template=fraghtml&application.fraghtml",true);q.onreadystatechange=function(){if(q.readyState==4&&(q.status==200||q.status==0)){h.innerHTML=q.responseText;g(h.childNodes[0].getElementsByTagName("div")[0],i)}};o++;q.send(null)}for(var f=0;f<d.childNodes.length;f++){if(d.childNodes[f].nodeName=="#text"){d.removeChild(d.childNodes[f]);f--}}for(var f=0;f<c.length;f++){if(c[f].className.search(/(^| )focus( |$)/)==-1){l(c[f].getElementsByTagName("a")[0].href,f)}else{var e=document.getElementById("desktop"+c[f].getElementsByTagName("a")[0].search.replace(/^\?tab=/,""));e.focus=j;e.desktopId=f}}};