/*
 * Simple file with all the statement to create and setup the 'mymed' keyspace
 * in a node.
 * This file should be executed just for one node, when updating the cluster.
 *
 * Created by Milo Casagrande <milo.casagrande@inria.fr>, 2011
 *
*/

/* Create the 'mymed' keyspace 
 *
 * The 'RackUnawareStrategy' has been renamed into 'SimpleStrategy' from v0.7.
 * Also, the 'RackAwareStrategy' should have been renamed into 'NetworkTopologyStrategy'.
 *
 */
create keyspace mymed with replication_factor = 10 and placement_strategy = 'org.apache.cassandra.locator.SimpleStrategy';

/* Switch to the 'mymed' keyspace */
use mymed;

/* 
 * Create the column families 
 * Normal columns are:
 *  users
 *  sessions
 *  authentication
 *  services
 *  trips
 *  dht
 *
*/
create column family Users with column_type = 'Standard' and comparator = 'UTF8Type' and rows_cached = 100 and keys_cached = 1000 and key_cache_save_period = 3600;
create column family Session with column_type = 'Standard' and comparator = 'UTF8Type' and rows_cached = 100 and keys_cached = 1000 and key_cache_save_period = 3600;
create column family Authentication with column_type = 'Standard' and comparator = 'UTF8Type' and rows_cached = 100 and keys_cached = 1000 and key_cache_save_period = 3600;
create column family Services with column_type = 'Standard' and comparator = 'UTF8Type' and rows_cached = 100 and keys_cached = 1000 and key_cache_save_period = 3600;
create column family Trips with column_type = 'Standard' and comparator = 'BytesType' and rows_cached = 100 and keys_cached = 1000 and key_cache_save_period = 3600;
create column family Dht with column_type = 'Standard' and comparator = 'UTF8Type' and rows_cached = 100 and keys_cached = 1000 and key_cache_save_period = 3600;

/*
 * Create the super columns
 * Super columns are:
 *  usergroup
 *  mytransport
 *  reputation
 *
*/
create column family Usergroup with column_type = 'Super' and comparator = 'UTF8Type' and subcomparator = 'UTF8Type';
create column family Mytransport with column_type = 'Super' and comparator = 'UTF8Type' and subcomparator = 'UTF8Type';
create column family Reputation with column_type = 'Super' and comparator = 'UTF8Type' and subcomparator = 'UTF8Type';
